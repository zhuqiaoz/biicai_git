# Function

* 调用函数，传入实参。在函数定义形参()。
* 函数在调用时，有一个特殊的值。本次调用的上下文。--this
* 函数挂载在对象上，就成为对象的属性，也称对象的方法。 调用对象的方法。this值就是这个对象。


## 函数调用
* 作为函数
* 作为方法
* 作为构造函数
* 使用call、apply和bind方法调用。

### 作为函数
* 调用上下文在非严格模式下this值是window。严格模式下是undefined。

>区分函数声明和表达式最简单的方法是看function关键字出现在声明中的位置（不仅仅是一行代码，而是整个声明中的位置）。如果function是声明中的第一个词，那么就是一个函数声明，否则就是一个函数表达式。

#### IIFE
* IIFE:代表立即执行函数表达式（ImmediatelyInvoked Function Expression）
* IIFE的另一个非常普遍的进阶用法是把它们当作函数调用并传递参数进去。
```
var a = 2;
(function( global ){
    var a =3;
    console.log( a );
    console.log( this.a )
    console.log( global.a)
})(window)
```


### 方法调用
* 调用上下文：使用方法调用函数，this的值就是调用的对象。


#### this
* 关键字this没有作用域的限制，嵌套函数不会从调用它的函数中继承this。
* 如果嵌套函数作为方法返回，那么this值指向调用的对象。
* 如果嵌套函数作为函数调用，那么this值指向window（严格模式下undefined）。
* this实际上是在函数被调用时发生的绑定，它指向什么完全取决于函数在哪里被调用。
* 内置函数setTimeout()...会丢失this指向。

##### this绑定
1. 由new调用？绑定到新创建的对象。
2. 由call或者apply（或者bind）调用？绑定到指定的对象。
3. 由上下文对象调用？绑定到那个上下文对象。
4. 默认：在严格模式下绑定到undefined，否则绑定到全局对象。



### 构造函数调用
* 函数或方法在调用前有`new`关键字，它就是构造函数调用。
* 构造函数调用，在实参处理、调用上下文和返回值都不同。

---
* callee ： 正在执行的函数。
* caller ： 调用正在执行的函数。


### 闭包
* JavaScript采用语法作用域，函数执行依赖变量作用域。
* 变量作用域在定义的决定的，不是在调用时决定的。
* 变量作用域+函数作用域 --> 当前作用域。
* 函数通过作用域相互关联起来，函数体内的变量都也可保存在函数作用域中。  --> 闭包。

* 从技术角度上将，所有的函数都是对象，都关联作用域， 都是闭包。

#### 函数作用域
* 函数内所有定义的变量在函数体都是可见的。
* 也就是说，可以在未定义之前使用变量 --> 变量提示。

* 函数里声明的所有变量都会提升（变量不包括赋值的。）

#### 变量作用域(词法作用域)
* 全局变量局有全局作用域。
* 函数内声明的变量(局部变量)，只在函数体内可见。 
* 函数参数也是局部变量。

